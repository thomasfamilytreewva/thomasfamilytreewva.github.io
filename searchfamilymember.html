<!--15 jul 2018-->
<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
table, th, td {
  border: 1px solid black;
}

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>


<script>
var myTable = document.getElementById("myTable");
          	
 var myObj = JSON.parse(localStorage["myObj"]);
var rowIndex;

function mySearch() {

document.getElementById("imageholder").innerHTML= "";
	

  try{
 var myDiv = document.getElementById("myDIV");
myDiv.remove();
 }catch{
 // do nothing
 }

var x = document.getElementById("myTable").rows.length;
var i=x
while (i > 1) {
 document.getElementById("myTable").deleteRow(1);
  i=i-1;
}

searchName = document.getElementById("searchName").value
searchName = searchName.toUpperCase();
  
for (i in myObj) {
nuid=myObj[i].NodeUID;
  fn = myObj[i].FirstName  ;
   fn = fn.toUpperCase();
    mn=myObj[i].MiddleName;
 mn = mn.toUpperCase();
  man=myObj[i].MaidenName;
 man = man.toUpperCase();
 ln=myObj[i].LastName;
 ln = ln.toUpperCase();
   nn=myObj[i].NickName;
 nn = nn.toUpperCase();
  fnn=myObj[i].FirstNickName;
 fnn = fnn.toUpperCase();

 if (fnn.includes(searchName)==true){
 
  createTable();
  document.getElementById("myTable").style.visibility = "visible";
  document.getElementById("clickForDetails").style.visibility = "visible";
   addClickTable();

 }
 
  }

// var x = document.getElementById("myTable").rows.length;
}
</script>


 <script>
 function createTable(){
  var x = document.createElement("TBODY");
  var y = document.createElement("TR");
   var z1 = document.createElement("TD");
 var z2 = document.createElement("TD");
  var z3 = document.createElement("TD");
   var z4 = document.createElement("TD");
    var z5 = document.createElement("TD");
	 var z6 = document.createElement("TD");
  z1.innerHTML = (nuid);
 z2.innerHTML = (fn);
 z3.innerHTML = (mn);
 z4.innerHTML = (man);
 z5.innerHTML = (ln);
 z6.innerHTML = (nn);
  y.appendChild(z1);
    y.appendChild(z2);
	y.appendChild(z3);
	y.appendChild(z4);
	y.appendChild(z5);
	y.appendChild(z6);
  x.appendChild(y);
  document.getElementById("myTable").appendChild(x);
  
   var para = document.createElement("p");
var node = document.createTextNode("Click on family member's name for details.");
para.appendChild(node);

}
 </script>
 
 
  <script>
function addClick() {
    var table = document.getElementById('myTable');
    var cells = table.getElementsByTagName('td');

    for (var i = 0; i < cells.length; i++) {
        // Take each cell
     var cell = cells[i];
        // do something on onclick event for cell
     cell.onclick = function () {
            // Get the row id where the cell exists
            var rowId = this.parentNode.rowIndex;
alert(rowId);
alert(document.getElementById("myTable").rows[1].cells[0].innerHTML);
alert(document.getElementById("myTable").rows[rowId].cells[0].innerHTML);
idvar=(document.getElementById("myTable").rows[rowId].cells[0].innerHTML);
alert(idvar);
}
   }

}
</script>


 
  
 <script>
  function addClickTable(){
   var table = document.getElementById('myTable');
    var rows = table.getElementsByTagName('tr');

    for (var i = 0; i < rows.length; i++) {
        // Take each cell
     var row = rows[i];
        // do something on onclick event for cell
     row.onclick = function () {
	 // alert(idvar);
 // alert(this);
  
   var myDiv = document.createElement("div");
//myDiv.style.cssText = 'position:absolute;width:100%;height:100%;opacity:0.3;z-index:100;background:#000;';
document.body.appendChild(myDiv);
myDiv.id=("myDIV");

            // Get the row id where the cell exists
			rowIndex=(this.rowIndex);
			if (rowIndex==0){
			return;
			}
			//alert(rowIndex);
			idvar = (this.cells[0].innerHTML);
			showPhoto();
			showFamilyMemberInfo();
			 deleteRows();
			document.getElementById("myTable").style.visibility = "hidden";
			document.getElementById("clickForDetails").style.visibility = "hidden";
   
           				       }
							   }
							   }
	
</script>

<script>
function rowIndex(){
 var table = document.getElementById("myTable");
                for(var i = 0; i < table.rows.length; i++)   {
                                 table.rows[i].onclick = function()
                    {
						
						idvar = (this.cells[0].innerHTML);
						       }
							   
                }
}
</script>



<script>
function showPhoto(){
	var urlvar = "";
	urlvar = ("images/" + idvar + ".png");
	 var repImage = "<img src=' " + urlvar + " '>";
	document.getElementById("imageholder").innerHTML= repImage;
		}
		
		function deleteRows(){
			var x = document.getElementById("myTable").rows.length;
var i=x
while (i > 1) {
 document.getElementById("myTable").deleteRow(1);
  i=i-1;
}				 
idvar = "";
	 }
</script>
  
  
  <script>
  function showFamilyMemberInfo(){
  
    for (i in myObj) {
	nuid=(myObj[i].NodeUID);
	if (myObj[i].NodeUID == idvar){
		 nuid=myObj[i].NodeUID;
  fn = myObj[i].FirstName  ;
   //fn = fn.toUpperCase();
    mn=myObj[i].MiddleName;
 //mn = mn.toUpperCase();
  man=myObj[i].MaidenName;
 //man = man.toUpperCase();
 ln=myObj[i].LastName;
 //ln = ln.toUpperCase();
   nn=myObj[i].NickName;
 //nn = nn.toUpperCase();
  fnn=myObj[i].FirstNickName;
 //fnn = fnn.toUpperCase();
 pob=myObj[i].PlaceOfBirth;
 //pob = pob.toUpperCase();
 dob=myObj[i].DateOfBirth;
 //dob = pob.toUpperCase();
 pod=myObj[i].PlaceOfDeath;
 //pod = pod.toUpperCase();
 dod=myObj[i].DateOfDeath;
 //dod = dod.toUpperCase(); 
 tel1=myObj[i].Tel1;
 //tel1=tel1.toUpperCase();
 email=myObj[i].Email;
 //email=email.toUpperCase();
 city=myObj[i].City;
 //city=city.toUpperCase();
 state=myObj[i].State;
 //state=state.toUpperCase();
 }
	}
	
	var pfn = document.createElement("P");                 // Create a <p> element
pfn.innerHTML = "First Name: " + fn;                // Insert text
document.getElementById("myDIV").appendChild(pfn);     // Append <p> to <div> with id="myDIV"
	
		var pln = document.createElement("P");                 // Create a <p> element
pln.innerHTML = "Last Name: " + ln;                // Insert text
document.getElementById("myDIV").appendChild(pln);     // Append <p> to <div> with id="myDIV"
	
			var pnn = document.createElement("P");                 // Create a <p> element
pnn.innerHTML = "Nick Name: " + nn;                // Insert text
document.getElementById("myDIV").appendChild(pnn);     // Append <p> to <div> with id="myDIV"
	
			var ppob = document.createElement("P");                 // Create a <p> element
ppob.innerHTML = "Place Of Birth: " + pob;                // Insert text
document.getElementById("myDIV").appendChild(ppob);     // Append <p> to <div> with id="myDIV"
	
			var pdob = document.createElement("P");                 // Create a <p> element
pdob.innerHTML = "Date Of Birth: " + dob;                // Insert text
document.getElementById("myDIV").appendChild(pdob);     // Append <p> to <div> with id="myDIV"
	
			var ppod = document.createElement("P");                 // Create a <p> element
ppod.innerHTML = "Place Of Death: " + pod;                // Insert text
document.getElementById("myDIV").appendChild(ppod);     // Append <p> to <div> with id="myDIV"
	
			var pdod = document.createElement("P");                 // Create a <p> element
pdod.innerHTML = "Date Of Death: " + dod;                // Insert text
document.getElementById("myDIV").appendChild(pdod);     // Append <p> to <div> with id="myDIV"

			var ptel1 = document.createElement("P");                 // Create a <p> element
ptel1.innerHTML = "Tel: " + tel1;                // Insert text
document.getElementById("myDIV").appendChild(ptel1);     // Append <p> to <div> with id="myDIV"
	
				var pemail = document.createElement("P");                 // Create a <p> element
pemail.innerHTML = "Email: " + email;                // Insert text
document.getElementById("myDIV").appendChild(pemail);     // Append <p> to <div> with id="myDIV"
  }
  
</script>
  
 </head>
<body>

<a href="index.html">Main Menu</a><br><br>	

Enter First Name or Nick Name:<br>
  <input id="searchName" type="text"><br><br>
  <button id="SearchButton" onclick="mySearch()">Search</button><br><br>

   <script>
var input = document.getElementById("searchName");
input.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
   event.preventDefault();
   document.getElementById("SearchButton").click();
  }
});

</script> 
  
 <p id="clickForDetails">Click on family member's name for photo and details.</p>
<table id="myTable">
  <tr>
    <th>NUID</th>
    <th>First Name</th>
    <th>Middle Name</th>
	<th>Maiden Name</th>
    <th>Last Name</th>
    <th>Nick Name</th>
  </tr>
  </table>
  
  <script>
	document.getElementById("myTable").style.visibility = "hidden";
			document.getElementById("clickForDetails").style.visibility = "hidden";
 </script>  

  
  <br>
<div id='imageholder'>
<p></p>
</div>

 </body>
</html>